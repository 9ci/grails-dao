
buildscript {
	repositories {
		mavenLocal()
		maven { url "https://repo.grails.org/grails/core" }
	}
	dependencies {
		classpath "org.grails.plugins:views-gradle:1.2.0.M2"
		classpath "org.grails.plugins:hibernate5:${gormVersion-".RELEASE"}"
	}
}



apply plugin: "eclipse"
apply plugin: "org.grails.plugins.views-json"
apply plugin: 'codenarc'


bootRun {
	jvmArgs('-Dspring.output.ansi.enabled=always')
	addResources = true
}

bootRepackage.enabled = false

configurations.all {
    exclude module:'grails-datastore-simple'
}

dependencies {

    compile "org.grails.plugins:hibernate5"
    compile "org.hibernate:hibernate-core:5.1.5.Final"
    compile "org.hibernate:hibernate-ehcache"

	compile "org.grails.plugins:views-json:1.2.0.M2"
	compile "org.grails.plugins:views-json-templates:1.2.0.M2"

 	compile "org.springframework:spring-test"
    compile "org.springframework.data:spring-data-commons" //:1.12.10.RELEASE


	provided "org.codehaus.groovy:groovy-ant"

	codenarc 'org.codenarc:CodeNarc:0.27.0'

	testCompile "org.grails.plugins:geb"
    //testCompile "org.grails:grails-gorm-testing-support"
	testCompile "org.grails:grails-plugin-testing"
}

codenarc {
	toolVersion = '0.27.0'
	config = project.resources.text.fromString("${commonBuild}/codenarc/rules.groovy".toURL().text)
	reportFormat = 'html'
	ignoreFailures = true

	maxPriority1Violations = 0
	maxPriority2Violations = 4
	maxPriority3Violations = 8
}

codenarcMain {
	exclude '**/GormScalars.groovy'
}

codenarcTest {
	ignoreFailures = true
}

