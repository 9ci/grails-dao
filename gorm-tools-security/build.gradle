apply plugin:"org.grails.grails-plugin"

repositories {
  //yakworks.grails-plugin adds the repos we need
  maven { url "http://repo.9ci.com/oss-snapshots" }
  mavenLocal()
}

dependencies {
  console "org.grails:grails-console"

  // compile "org.grails:grails-plugin-validation"
  compile "org.grails.plugins:spring-security-core:$vSpringSecurity"
  // compile "org.grails.plugins:spring-security-rest:$vSpringSecurityRest"

  compile project(":gorm-tools")

  // used for bundled Test traits
  compileOnly "org.grails:grails-gorm-testing-support"
  // compileOnly "org.grails:grails-web-testing-support"
  // compileOnly "org.grails.plugins:build-test-data:$versionBuildTestData"
  // compileOnly "org.grails.plugins:geb"
  // compileOnly "org.grails:grails-datastore-rest-client"
  // compileOnly "org.seleniumhq.selenium:selenium-htmlunit-driver:2.47.1" // needed for groovydoc
}

bootRun {
  ignoreExitValue true
  jvmArgs(
    '-Dspring.output.ansi.enabled=always',
    '-noverify',
    '-XX:TieredStopAtLevel=1',
    '-Xmx1024m')
  sourceResources sourceSets.main
  String springProfilesActive = 'spring.profiles.active'
  systemProperty springProfilesActive, System.getProperty(springProfilesActive)
}

test {
  //testLogging.showStandardStreams = true
  testLogging.exceptionFormat = 'full'
}

//dont need to bundle up bootstrap
// jar {
//   exclude('grails/plugin/rally/security/init/**')
// }
