
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <meta name="description" content="Helpers for gorm">
      
      
        <link rel="canonical" href="http://yakworks.github.io/gorm-tools/dao/">
      
      
        <meta name="author" content="Joshua Burnett">
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-components-1.10.11">
    
    
      
        <title>DAO Services - Gorm Tools</title>
      
    
    
      
    
    
      <script src="../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-2cd7d9ab0f.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-035c261bc5.palette.css">
      
      <link rel="stylesheet" href="../assets/stylesheets/material-components-web.min.css">
      <link rel="stylesheet" href="../assets/stylesheets/mdc-web.css">
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open Sans:300,300i,400,400i,600,600i,700,700i,800,800i|Ubuntu+Mono">
        <style>body,input{font-family:"Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.js"></script>
    
  </head>
  
  
  
  
    <body data-md-color-primary="light-green" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      
        <style>.region--header{background-color:rgba(255,255,255,.9);min-height:3.25rem;width:100%;z-index:2}header.region--header{position:fixed;top:0;right:0;left:0}.region--header .region--header__wrapper{max-width:1440px;margin-left:auto;margin-right:auto;position:relative;z-index:2;box-sizing:inherit}.region--header .region--header__logo{display:inline-block;float:left;height:3.25rem;margin:0;padding-left:1rem}.site-logo{display:block;height:4.25rem;padding:1.5rem 0}.site-logo--main{display:block;height:3.25rem;margin:0;padding:0;width:4.25rem}.header-navigation{font-size:1rem;clear:none;float:right;margin-top:.75rem;padding-bottom:0;padding-right:.75rem}.header-navigation__menu{clear:both;overflow:visible;-webkit-transform-style:preserve-3d;width:100%;z-index:9999;display:inline;margin:0;padding:0}.header-navigation__menu-link{display:inline;line-height:1.5;margin-right:0;padding-right:0;width:auto;overflow:hidden;text-align:right;z-index:2}.region--header a{text-decoration:none}.header-navigation__menu-link a{padding-left:.75rem;padding-right:.75rem;color:#012b45;display:inline-block;font-weight:400;text-transform:uppercase;transition:background-color ease .2s}@media only screen and (max-width:500px){.header-navigation{font-size:.85rem}.header-navigation__menu-link a{padding-left:.25rem;padding-right:.25rem}}.header-navigation__menu-link:last-child:not(.header-navigation__active-nav-item):not(:hover):not(:focus){color:#e8650c}.header-navigation__menu-link a:focus,.header-navigation__menu-link a:hover{color:#e8650c}.md-container{padding-top:6.5rem}#header-docs{top:3.25rem}#background{display:none}#header-docs .md-logo{display:none}</style>
<style media="print">#header-docs{top:0}#header-docs .md-logo{display:block}#header-website{display:none}.md-container{padding-top:0}.headroom--pinned{transform:translateY(0)}#background{position:fixed;top:250px;left:50px;z-index:9999999;background:0 0;min-height:30%;min-width:30%;display:block}#bg-text{color:rgba(211,211,211,.2);font-size:80px;transform:rotate(300deg);-webkit-transform:rotate(300deg)}</style>
<div id="background">
  <p id="bg-text">9ci Confidential</p>
</div>
<header id="header-website" class="region--header" role="banner">
  <div class="region--header__wrapper">
    <a href="/" class="region--header__logo">
      <img src="http://www.9ci.com/assets/img/logo.svg" alt="9ci logo" class="site-logo site-logo--main">
    </a>
    <nav role="navigation" class="header-navigation">
      <ul id="js-navigation-menu" class="header-navigation__menu">
      <li class="header-navigation__menu-link">
        <a href="http://www.9ci.com/solutions">Solutions</a>
      </li>
      <li class="header-navigation__menu-link">
        <a href="http://www.9ci.com/company">Company</a>
      </li>
      <li class="header-navigation__menu-link">
        <a href="http://www.9ci.com/contact">Contact</a>
      </li>
      </ul>
    </nav>
  </div>
</header>
<header id="header-docs" class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink md-flex__cell--vmiddle">
        <a href="http://yakworks.github.io/gorm-tools/" title="Gorm Tools" class="md-header-nav__button md-logo">
          
            <img src="../assets/images/logo_white.png" width="36" height="36">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            Gorm Tools -
            
              
            
            DAO Services
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/yakworks/gorm-tools" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      yakworks/gorm-tools
    </div>
  </a>

          </div>
        </div>
      
      
    </div>
  </nav>
</header>
      
    
    <div class="md-container">
      
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <div class="md-nav__button md-logo">
      
        <i class="md-icon md-icon--home"></i>
      
    </div>
    Gorm Tools
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/yakworks/gorm-tools" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      yakworks/gorm-tools
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        DAO Services
      </label>
    
    <a href="./" title="DAO Services" class="md-nav__link md-nav__link--active">
      DAO Services
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title md-nav__toc" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#domain-traits" title="Domain Traits" class="md-nav__link">
    Domain Traits
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dynamic-methods-added-to-the-domains" title="Dynamic methods added to the domains" class="md-nav__link">
    Dynamic methods added to the domains
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statics-added-to-the-domain" title="Statics added to the domain" class="md-nav__link">
    Statics added to the domain
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#daoutil-and-daomessage" title="DaoUtil and DaoMessage" class="md-nav__link">
    DaoUtil and DaoMessage
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#daoutil" title="DaoUtil:" class="md-nav__link">
    DaoUtil:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daomessage-contains-bunch-of-help-methods-for-creating-text-messages" title="DaoMessage contains bunch of help methods for creating text messages" class="md-nav__link">
    DaoMessage contains bunch of help methods for creating text messages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grails-3" title="Grails 3:" class="md-nav__link">
    Grails 3:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dao-message" title="DAO Message" class="md-nav__link">
    DAO Message
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saved-and-no-saved-messages" title="Saved and no saved messages" class="md-nav__link">
    Saved and no saved messages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-available-messages" title="List of available messages" class="md-nav__link">
    List of available messages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domainexception" title="DomainException" class="md-nav__link">
    DomainException
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domainnotfoundexception" title="DomainNotFoundException" class="md-nav__link">
    DomainNotFoundException
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../queries-mango/" title="Mango & Queries" class="md-nav__link">
      Mango & Queries
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../id-generation/" title="Id Generation" class="md-nav__link">
      Id Generation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../gorm-utils/" title="Gorm Utils" class="md-nav__link">
      Gorm Utils
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../beanPathTools/" title="Bean Path Tools" class="md-nav__link">
      Bean Path Tools
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../working-with-dates/" title="Date Utils" class="md-nav__link">
      Date Utils
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title md-nav__toc" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#domain-traits" title="Domain Traits" class="md-nav__link">
    Domain Traits
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dynamic-methods-added-to-the-domains" title="Dynamic methods added to the domains" class="md-nav__link">
    Dynamic methods added to the domains
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statics-added-to-the-domain" title="Statics added to the domain" class="md-nav__link">
    Statics added to the domain
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#daoutil-and-daomessage" title="DaoUtil and DaoMessage" class="md-nav__link">
    DaoUtil and DaoMessage
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#daoutil" title="DaoUtil:" class="md-nav__link">
    DaoUtil:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daomessage-contains-bunch-of-help-methods-for-creating-text-messages" title="DaoMessage contains bunch of help methods for creating text messages" class="md-nav__link">
    DaoMessage contains bunch of help methods for creating text messages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grails-3" title="Grails 3:" class="md-nav__link">
    Grails 3:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dao-message" title="DAO Message" class="md-nav__link">
    DAO Message
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saved-and-no-saved-messages" title="Saved and no saved messages" class="md-nav__link">
    Saved and no saved messages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-available-messages" title="List of available messages" class="md-nav__link">
    List of available messages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domainexception" title="DomainException" class="md-nav__link">
    DomainException
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domainnotfoundexception" title="DomainNotFoundException" class="md-nav__link">
    DomainNotFoundException
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div id="article-content" class="md-content"> 
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/yakworks/gorm-tools/edit/master/docs/dao.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>DAO Services</h1>
                
                
                <p><strong>Example of the transaction propagation issue:</strong></p>
<p>With the cascade save of an association where we were saving a Parent with new Child. The issue will kick in when new Child saved and blew up and the Parent changes stay. We have a good example of this issue in the demo-app under test</p>
<p>With this plugin and a controller you can just do:</p>
<div class="codehilite"><pre><span></span><span class="kt">def</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">try</span><span class="o">{</span>
    <span class="kt">def</span> <span class="n">result</span> <span class="o">=</span> <span class="n">YourDomainClass</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">p</span><span class="o">)</span>
      <span class="n">flash</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">message</span>
      <span class="n">redirect</span><span class="o">(</span><span class="nl">action:</span> <span class="s1">&#39;show&#39;</span><span class="o">,</span> <span class="nl">id:</span> <span class="n">result</span><span class="o">.</span><span class="na">entity</span><span class="o">.</span><span class="na">id</span><span class="o">)</span>
  <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">DomainException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">flash</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">messageMap</span>
    <span class="n">render</span><span class="o">(</span><span class="nl">view:</span> <span class="s1">&#39;edit&#39;</span><span class="o">,</span> <span class="nl">model:</span> <span class="o">[(</span><span class="n">domainInstanceName</span><span class="o">):</span> <span class="n">e</span><span class="o">.</span><span class="na">entity</span><span class="o">])</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>Each domain gets injected with its own static dao object based on the GormDaoSupport service. If it finds a service that in the form of &lt;<Domain Name>&gt;Dao that is in any services or dao dir under grai-app then it will use that.</p>
<p><strong>Example</strong> You can setup your own dao for the domain like so and keep the logic in your Dao service and leave the controller alone as all the logic will flow over</p>
<p>See <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/GormDaoSupport.groovy">GormDaoSupport</a></p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">OrgDao</span> <span class="kd">extends</span> <span class="n">GormDaoSupport</span> <span class="o">{</span>
    <span class="kt">def</span> <span class="n">domainClass</span> <span class="o">=</span> <span class="n">Org</span>

    <span class="kt">def</span> <span class="nf">update</span><span class="o">(</span><span class="n">params</span><span class="o">){</span>
        <span class="c1">// ... do some stuff to the params</span>
        <span class="kt">def</span> <span class="n">result</span> <span class="o">=</span> <span class="kd">super</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">params</span><span class="o">)</span>
        <span class="c1">// ... do something like log history or send email with result.entity which is the saved org</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h2 id="domain-traits">Domain Traits<a class="headerlink" href="#domain-traits" title="Permanent link">&para;</a></h2>
<h3 id="dynamic-methods-added-to-the-domains">Dynamic methods added to the domains<a class="headerlink" href="#dynamic-methods-added-to-the-domains" title="Permanent link">&para;</a></h3>
<p>Every domain gets a dao which is either setup for you or setup by extending e <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/GormDaoSupport.groovy">GormDaoSupport</a>. Each method is transactional to prevent incomplete cascading saves as exaplained above.</p>
<p><strong>persist()</strong>: calls the dao.save which in turn calls the dao.save(args) and then domain.save(failOnError:true) with any other args passed in. ex: someDomain.persist(). Throws a <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DomainException.groovy">DomainException</a> if anything goes wrong</p>
<p><strong>remove()</strong>:  calls the dao.delete which calls the dao.remove(args) which in turn calls the domain.delete(flush:true) by default. Throws a <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DomainException.groovy">DomainException</a> if anything goes wrong</p>
<h3 id="statics-added-to-the-domain">Statics added to the domain<a class="headerlink" href="#statics-added-to-the-domain" title="Permanent link">&para;</a></h3>
<p><strong>insertAndSave(params)</strong>:  calls the dao.insert which does the bolier plate code you might find in a scaffolded controller. creates a new instance, sets the params and calls the dao.save (essentially the persist()). <strong>ex:</strong> Book.insertAndSave([name:'xyz',isbn:'123']) Throws a <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DomainException.groovy">DomainException</a> if anything goes wrong</p>
<p><strong>update(params)</strong>:  calls the dao.update which does the boiler plate code you might find in a scaffolded controller. gets the instance base in the params.id, sets the params and calls the dao.save for it. <strong>ex:</strong> Book.update([id:11,name:'aaa']) Throws a <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DomainException.groovy">DomainException</a> if anything goes wrong</p>
<p><strong>remove(params)</strong>:  calls the dao.delete gets the instance base in the params.id, calls the delete for it. <strong>ex:</strong> Book.remove([id:11]) Throws a <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DomainException.groovy">DomainException</a> if anything goes wrong</p>
<p><strong>dao</strong>: a quick way to get to the dao for the Domain. It will return the stock dao that was created from GormDaoSupport or the Dao you created for the domain.</p>
<h2 id="daoutil-and-daomessage">DaoUtil and DaoMessage<a class="headerlink" href="#daoutil-and-daomessage" title="Permanent link">&para;</a></h2>
<p>See <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DaoUtil.groovy">DaoUtil</a></p>
<h4 id="daoutil">DaoUtil:<a class="headerlink" href="#daoutil" title="Permanent link">&para;</a></h4>
<p><strong>checkFound(entity, Map params,String domainClassName)</strong> checks does the entity exists, if not throws DomainNotFoundException with human readable error text</p>
<p><strong>checkVersion(entity,ver)</strong> checks the passed in version with the version on the entity (entity.version) make sure entity.version is not greater, throws DomainException</p>
<p><strong>flush()</strong> flushes the session</p>
<p><strong>clear()</strong> clears session cache</p>
<p><strong>flushAndClear()</strong> flushes the session and clears the session cache</p>
<h4 id="daomessage-contains-bunch-of-help-methods-for-creating-text-messages">DaoMessage contains bunch of help methods for creating text messages<a class="headerlink" href="#daomessage-contains-bunch-of-help-methods-for-creating-text-messages" title="Permanent link">&para;</a></h4>
<p>See <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DaoMessage.groovy">DaoMessage</a></p>
<h2 id="grails-3">Grails 3:<a class="headerlink" href="#grails-3" title="Permanent link">&para;</a></h2>
<p>Dynamic methods were implemented with trait instead of meta programing, so now <code>@CompileStatic</code> can be used.
Due to this changes static method <code>insert</code> for domain objects was renamed to <code>insertAndSave</code>, because domain class instances
already have <code>insert</code> method and we can't have both static and instance methods with same list of args.</p>
<h2 id="dao-message">DAO Message<a class="headerlink" href="#dao-message" title="Permanent link">&para;</a></h2>
<p>See <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DaoMessage.groovy">DaoMessage</a></p>
<p>Gorm-tools provides a way to build message maps with information about a status of a domain instance.
Uses i18n messages.</p>
<h2 id="saved-and-no-saved-messages">Saved and no saved messages<a class="headerlink" href="#saved-and-no-saved-messages" title="Permanent link">&para;</a></h2>
<p>The example below shows how to build <code>saved</code> message for a domain:</p>
<div class="codehilite"><pre><span></span>    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="nl">id:</span><span class="mi">100</span><span class="o">,</span><span class="nl">version:</span><span class="mi">1</span><span class="o">)</span>

    <span class="n">Map</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">DaoMessage</span><span class="o">.</span><span class="na">saved</span><span class="o">(</span><span class="n">user</span><span class="o">)</span>
    <span class="k">assert</span> <span class="s1">&#39;default.saved.message&#39;</span> <span class="o">==</span> <span class="n">msg</span><span class="o">.</span><span class="na">code</span> <span class="c1">//i18 code</span>
    <span class="k">assert</span> <span class="mi">100</span> <span class="o">==</span> <span class="n">msg</span><span class="o">.</span><span class="na">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
</pre></div>

<h2 id="list-of-available-messages">List of available messages<a class="headerlink" href="#list-of-available-messages" title="Permanent link">&para;</a></h2>
<ul>
<li>saved</li>
<li>not saved</li>
<li>updated</li>
<li>not updated</li>
<li>deleted</li>
<li>not deleted</li>
<li>notFound</li>
<li>optimisticLockingFailure - Another user has updated the resource while you were editing</li>
</ul>
<p>Gorm-tools provides its own types of exceptions to handle errors which relate to domains.</p>
<h2 id="domainexception">DomainException<a class="headerlink" href="#domainexception" title="Permanent link">&para;</a></h2>
<p>See <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DomainException.groovy">DomainException</a></p>
<p>An extension of the default ValidationException. It is possible to pass the entity and the message map.</p>
<h2 id="domainnotfoundexception">DomainNotFoundException<a class="headerlink" href="#domainnotfoundexception" title="Permanent link">&para;</a></h2>
<p>See <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/grails/plugin/dao/DomainNotFoundException.groovy">DomainNotFoundException</a></p>
<p>An extension of the DomainException to be able to handle rest request which should respond with 404 error.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Overview
              </span>
            </div>
          </a>
        
        
          <a href="../queries-mango/" title="Mango & Queries" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Mango & Queries
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 9ci Inc
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://yakworks.github.io/mkdocs-material-components/" title="Material Components for MkDocs">
          Material Components for MkDocs</a>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-68832431b5.js"></script>
      
      
      <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
      <script>window.mdc.autoInit()</script>
      <script src="../assets/javascripts/headroom.min.js"></script>
      <script src="../assets/javascripts/jQuery.headroom.min.js"></script>
      <script src="../assets/javascripts/jq-mdc-web.js"></script>
      <script src="https://cdn.jsdelivr.net/jquery.loadingoverlay/latest/loadingoverlay.min.js"></script>
      <script>app.initialize({version:"0.16.3",url:{base:".."}})</script>
      
    
    
  </body>
</html>