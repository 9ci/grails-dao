version "1.0"
group "yakworks"

buildscript {
  repositories {
    mavenLocal()
    maven { url "https://repo.grails.org/grails/core" }
  }
  dependencies {
    classpath "org.grails.plugins:views-gradle:1.2.5"
    //classpath "org.grails.plugins:hibernate5:${gormVersion-".RELEASE"}"
  }
}

apply plugin:"org.grails.grails-web"
apply plugin:"war"
apply plugin:"org.grails.grails-gsp"

dependencies {
  profile "org.grails.profiles:web"
  compile "org.springframework.boot:spring-boot-starter-actuator"
  provided "org.springframework.boot:spring-boot-starter-tomcat"

  console "org.grails:grails-console"
  //compile 'org.grails.plugins:grails-java8:1.2.2'

  testCompile "org.grails:grails-datastore-rest-client"
  testCompile "org.grails.plugins:geb"
  testRuntime "org.seleniumhq.selenium:selenium-chrome-driver:3.6.0"
  testRuntime "org.seleniumhq.selenium:selenium-firefox-driver:3.6.0"
  testRuntime "org.seleniumhq.selenium:selenium-remote-driver:3.6.0"
  testRuntime "org.seleniumhq.selenium:selenium-api:3.6.0"
}

bootRun {
  jvmArgs('-Dspring.output.ansi.enabled=always')
  addResources = true
}

grails {
  exploded = true
  plugins {
    //println "Inside grails: $rootProject.name"
    compile project(':gorm-tools')
  }
}

// Added to be able to see failed tests and the cause in console on test run.
// This really helpful and needed when viewing on Travis CI or others.
integrationTest {
  testLogging {
    exceptionFormat = 'full'
    events "failed"//, "passed", "skipped", "standardOut", "standardError"
  }

  // Uncomment line bellow to show in console all tests that were executed in next format:
  //:test-app:integrationTest

  //beforeTest { descriptor -> logger.quiet " -- $descriptor" }
}

test {
  //testLogging.showStandardStreams = true
  testLogging.exceptionFormat = 'full'
}
