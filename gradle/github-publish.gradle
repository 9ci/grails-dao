//see https://github.com/ajoberstar/gradle-git-publish for docs
ext['org.ajoberstar.grgit.auth.username'] = '02b16102479539e7ad76e32336deb540ad3cb9a9'
gitPublish {
    // where to publish to (repo must exist)
    repoUri = 'https://github.com/yakworks/gorm-tools.git'
    // (or 'https://github.com/ajoberstar/test-repo.git', depending on authentication)
    // branch will be created if it doesn't exist
    branch = 'testing-gitPublish'
    //repoDir = file("$buildDir/gitPublish") // defaults to $buildDir/gitPublish
    // what to publish, this is a standard CopySpec
    contents {
        from "$buildDir/mkdocs/site"
//        from(groovydoc) {
//            into 'api'
//        }
    }

    // what to keep in the existing branch (include=keep)
//    preserve {
//        include '1.0.0/**'
//        exclude '1.0.0/temp.txt'
//    }

    // message used when committing changes
    commitMessage = 'Publishing a new page [skip ci]' // defaults to 'Generated by gradle-git-publish'
}

//task gitPublishDocs(dependsOn: ['mkdocsBuild', 'gitPublishCommit'])

gitPublishCommit.dependsOn mkdocsBuild
